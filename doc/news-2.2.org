#+TITLE: mrcal 2.2 release notes
#+OPTIONS: toc:nil

* New in mrcal 2.2
fixed outlier weighing

mrcal-stereo --viz geometry

build update: I can cross-compile

quaternion support improved:

quat_from_R() improved
R_from_quat() improved
qt_from_Rt() new
Rt_from_qt() new
pq_from_Rt() removed
Rt_from_pq() removed

- diff functions. If the distance is iterable, the shape of the output of the
  internal functions is (len(distance), ...). Otherwise it is just (...). This
  is what the caller would expect

- diff functions. If multiple distances are given, we computed the implied
  transformation using ALL of them, but we display the diff from the FIRST given
  distance.

** mrcal-show-projection-diff --valid-intrinsics-region handles camera-1

Prior to this patch the region for the second camera was not being computed or
displayed properly


- ref_calibration_object() accepts uneven horizontal, vertical spacings. And it
  can broadcast over object_spacing and calobject_warp

- Added compose_r()

- pywrap functions take keyword-only args. No positional arguments allowed. This
  means we must update each mrcal.optimize() and mrcal.optimizer_callback() call

- libelas available as a stereo matcher in mrcal-stereo

- no outliers for discrete points still

- triangulated_error()

- mrcal.skew_symmetric()

- mrcal-stereo --write-point-cloud

- mrcal-calibrate-cameras works without --object-spacing. bug fix

- uncertainty plots can happen even with nan. Happens because of unproject
  failing. Should apply fix to other analyses too

- convention update: state is "b" not "p"
  
- TODO keyword-only args should be defined in Python

- compute_chessboard_corners() API rework

* Migration notes 2.1 -> 2.2
- Replace pq_from_Rt(),Rt_from_pq() with qt_from_Rt(),Rt_from_qt()

- =mrcal-stereo --show-geometry= is now invoked as =mrcal-stereo --viz geometry=

- renamed =mrcal-to-cameramodel= -> =mrcal-from-cahvor=

- mrcal-image. Dependency on libfreeimage

- Renamed C headers
  - mrcal_internal.h -> mrcal-internal.h
  - basic_geometry.h -> basic-geometry.h

- compute_chessboard_corners() API rework

* todo
- import stereo.c

